<!DOCTYPE html>
<html ng-app='MarketUpdateApp'>
  <head>
    <meta charset="utf-8">
    <script src="node_modules/angular/angular.min.js"></script>
    <script src="js/app.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!--link rel="stylesheet" href="styles.css"-->
    <title>Market Update</title>
 
  </head>

  <body style="color:#001548">

  
    <div class="container-fluid" ng-controller='MarketUpdateController as menu'>
	
		<br><br>
		

		<table>
		  <tr>
		    <td><img src="cdp_logo.png" class="img-responsive" style="width:90%" alt="CDP Logo"></td>
		    <th class="text-blue h3 text-center"> Market Update delle ore {{ menu.market_update_set[0].pub_hour }} del {{ menu.market_update_set[0].pub_date | date : 'dd-MM-yyyy'}} </th>
		  </tr>
		</table>

    <br><br>

		

		<table ng-repeat="category in menu.market_update_set | unique : 'cat_name'" class="table table-striped">
	    	<thead>
	        	<tr class="bg-danger text-white ">
	            	<th scope="col" colspan = "4" class="col-md-4">{{ category.cat_des }} </th>
	          	</tr>
	        </thead>
	        <tbody>
	  		    <tr class = "font-weight-bold">
	  		    	<td ng-repeat="title_sym in menu.market_update_set | filter : {cat_name :  category.cat_name} | unique : 'sym_des'" >
	  		    		{{ title_sym.sym_des }} 
	  		        </td>
	  		        <td ng-repeat="title in menu.market_update_set | filter : {cat_name :  category.cat_name} | unique : 'val_description'" >  
	        			 {{ title.val_description }}
	        			 <span ng-if="title.val_unit == 1" >(%)</span>
	        			 <span ng-if="title.val_unit == 2" >(bps)</span>
	        			 <span ng-if="title.val_unit == 5" >(€)</span> 
	        		</td>

	  		        <!--td ng-repeat="addcols in menu.market_update_set | filter : {cat_name :  category.cat_name} | unique : 'val_description' | RestN : 4 track by $index"> | </td-->   

	  		    </tr>
	        	<tr ng-repeat="symbol in menu.market_update_set | filter : {cat_name :  category.cat_name} | unique : 'sym_name'">
	        		<td > {{ symbol.sym_name }} </td>
	        		<td ng-repeat="value in menu.market_update_set | filter : { cat_name : category.cat_name, sym_name : symbol.sym_name }" >  
						 {{ value.val_value | number : value.val_precision }} 
	        		</td>
	        		
	  		        <!--td ng-repeat="addcols in menu.market_update_set | filter : {cat_name :  category.cat_name} | unique : 'val_description' | RestN : 4 track by $index"> | </td-->   

	        	</tr>
	        </tbody>		
		</table>



<br><br><br><br><br><br><br><br>
 



		<div ng-repeat="category in menu.market_update_set | unique : 'cat_name'">
			<div class="row justify-content-start">
				<div class="col-4 bg-danger text-white font-weight-bold"> {{ category.cat_des }} </div>
			</div>
			<div class="row justify-content-start">
				<div class="col-4"  ng-repeat="title_sym in menu.market_update_set | filter : {cat_name :  category.cat_name} | unique : 'sym_des'">
	  		    		{{ title_sym.sym_des }} 
	  		    </div>
  		    	<div class="col-4" ng-repeat="title in menu.market_update_set | filter : {cat_name :  category.cat_name} | unique : 'val_description'" >  
        			 {{ title.val_description }}
        			 <span ng-if="title.val_unit == 1" >(%)</span>
        			 <span ng-if="title.val_unit == 2" >(bps)</span>
        			 <span ng-if="title.val_unit == 5" >(€)</span> 
        		</div>
			</div>
			<div class="row justify-content-start" ng-repeat="symbol in menu.market_update_set | filter : {cat_name :  category.cat_name} | unique : 'sym_name'" >
				<div class="col-4" > {{ symbol.sym_name }} </div> 
				<div class="col-4" ng-repeat="value in menu.market_update_set | filter : { cat_name : category.cat_name, sym_name : symbol.sym_name }"> {{ value.val_value }}  </div> 
			</div>

		</div>



    <br><br>

		<table ng-repeat="category in menu.market_update_set | unique : 'cat_name'" class="table table-striped table-condensed">
	    	<thead>
	        	<tr class="bg-danger text-white">
	            	<th scope="col" colspan = "4">{{ category.cat_name }} </th>
	          	</tr>
	        </thead>
	        <tbody>
	        	<tr ng-repeat="symbol in menu.market_update_set | filter : {cat_name :  category.cat_name} | unique : 'sym_name'">
	        		<th> {{ symbol.sym_name }} </th>
	        		<td ng-repeat="value in menu.market_update_set | filter : { cat_name : category.cat_name, sym_name : symbol.sym_name }">  
	        			 {{ value.val_description }} {{ value.val_value }} {{ value.val_unit_display }} 
	        		</td>
	        	</tr>
	        </tbody>		
		</table>



		<br><br>


		<div ng-repeat="category in menu.market_update_set | unique : 'cat_name'">
			<div class="row justify-content-start">
				<div class="col-4"> {{ category.cat_name }} </div>
			</div>
			<div class="row justify-content-start">
				<div class="col-4"> Ticker </div> <div class="col-4"> ASW Spread (bps) </div> <div class="col-4">Mid Yield (%) </div>
			</div>
			<div class="row justify-content-start" ng-repeat="symbol in menu.market_update_set | filter : {cat_name :  category.cat_name} | unique : 'sym_name'" >
				<div class="col-4" > {{ symbol.sym_name }} </div> 
				<div class="col-4" ng-repeat="value in menu.market_update_set | filter : { cat_name : category.cat_name, sym_name : symbol.sym_name }"> {{ value.val_value }}  </div> 
			</div>

		</div>

		<br><hr><br>

		
		<table class = "table table-striped table-condensed">
			<tbody>
				
				<div class="row" ng-repeat="category in menu.market_update_set | unique : 'cat_name'"> 

					<tr class="bg-danger text-white font-weight-bold"> <td colspan="4"> {{ category.cat_name }} </td></tr>
			
					<div>
						<tr class = "font-weight-bold"><td>Ticker</td><td>ASW Spread (bps)</th><td>Mid Yield (%)</td><td></td></tr>
					</div>
			
					<div>
						<tr ng-repeat="symbol in menu.market_update_set | filter : {cat_name :  category.cat_name} | unique : 'sym_name'">
							<td> {{ symbol.sym_name }} </td>
							<td ng-repeat="value in menu.market_update_set | filter : { cat_name : category.cat_name, sym_name : symbol.sym_name }"> {{ value.val_value  | number:2  }}  </td>
						</tr>
					</div>
			
				</code>

			</tbody>
		</table>



    </div>

  </body>
</html>
